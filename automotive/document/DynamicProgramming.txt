Thuáº­t toÃ¡n quy hoáº¡ch Ä‘á»™ng (dynamic programming â€“ DP) lÃ  má»™t ká»¹ thuáº­t tá»‘i Æ°u hÃ³a máº¡nh máº½, 
Ä‘áº·c biá»‡t hiá»‡u quáº£ vá»›i cÃ¡c bÃ i toÃ¡n cÃ³ tÃ­nh cháº¥t con gá»‘i nhau vÃ  cáº¥u trÃºc con tá»‘i Æ°u. 

ğŸ§  NguyÃªn lÃ½ hoáº¡t Ä‘á»™ng
    Chia bÃ i toÃ¡n lá»›n thÃ nh cÃ¡c bÃ i toÃ¡n con nhá» hÆ¡n.
    LÆ°u trá»¯ káº¿t quáº£ cá»§a cÃ¡c bÃ i toÃ¡n con Ä‘á»ƒ trÃ¡nh tÃ­nh toÃ¡n láº·p láº¡i.
    Sá»­ dá»¥ng láº¡i káº¿t quáº£ Ä‘Ã£ lÆ°u Ä‘á»ƒ xÃ¢y dá»±ng lá»i giáº£i cho bÃ i toÃ¡n lá»›n.

ğŸ“Œ Khi nÃ o nÃªn dÃ¹ng quy hoáº¡ch Ä‘á»™ng?
    BÃ i toÃ¡n cÃ³ bÃ i toÃ¡n con gá»‘i nhau (overlapping subproblems).
    BÃ i toÃ¡n cÃ³ cáº¥u trÃºc con tá»‘i Æ°u (optimal substructure).

ğŸ› ï¸ CÃ¡c bÆ°á»›c Ã¡p dá»¥ng
    1. XÃ¡c Ä‘á»‹nh bÃ i toÃ¡n con vÃ  má»‘i quan há»‡ giá»¯a chÃºng.
    2. XÃ¢y dá»±ng cÃ´ng thá»©c truy há»“i (recurrence relation).
    3. Khá»Ÿi táº¡o giÃ¡ trá»‹ ban Ä‘áº§u (base cases).
    4. TÃ­nh toÃ¡n theo thá»© tá»± tÄƒng dáº§n hoáº·c giáº£m dáº§n (bottom-up hoáº·c top-down).
    5. Truy váº¿t lá»i giáº£i náº¿u cáº§n tÃ¬m Ä‘Æ°á»ng Ä‘i hoáº·c cáº¥u trÃºc lá»i giáº£i.

ğŸ“ˆ Æ¯u Ä‘iá»ƒm
    Giáº£m thá»i gian tÃ­nh toÃ¡n Ä‘Ã¡ng ká»ƒ.
    Giáº£i quyáº¿t Ä‘Æ°á»£c nhiá»u bÃ i toÃ¡n phá»©c táº¡p trong thá»±c táº¿ vÃ  thi Ä‘áº¥u láº­p trÃ¬nh.

===============================================================================================
BÃ i toÃ¡n ba lÃ´ (Knapsack Problem) trong quy hoáº¡ch Ä‘á»™ng:

ğŸ§© 1. XÃ¡c Ä‘á»‹nh bÃ i toÃ¡n con (Subproblems):
Má»¥c tiÃªu: Chia bÃ i toÃ¡n lá»›n thÃ nh cÃ¡c bÃ i toÃ¡n nhá» hÆ¡n cÃ³ thá»ƒ giáº£i Ä‘á»™c láº­p.
PhÃ¢n tÃ­ch:
    Má»—i bÆ°á»›c hÃ nh trÃ¬nh cÃ³: value, weight
    Trong bÃ i toÃ¡n ba lÃ´, má»—i váº­t pháº©m (hay má»—i bÆ°á»›c hÃ nh trÃ¬nh) Ä‘Æ°á»£c gÃ¡n:
        value â€“ giÃ¡ trá»‹ mang láº¡i (lá»£i Ã­ch, kinh nghiá»‡m, thÃ nh tá»±uâ€¦)
        weight â€“ chi phÃ­ pháº£i tráº£ (thá»i gian, cÃ´ng sá»©c, rá»§i roâ€¦)

ğŸ§  2. XÃ¢y dá»±ng cÃ´ng thá»©c truy há»“i (Recurrence Relation):
Má»¥c tiÃªu: TÃ¬m má»‘i quan há»‡ giá»¯a bÃ i toÃ¡n lá»›n vÃ  cÃ¡c bÃ i toÃ¡n con.
PhÃ¢n tÃ­ch:
    Giáº£ sá»­ báº¡n cÃ³ má»™t ba lÃ´ vá»›i sá»©c chá»©a W, vÃ  má»™t danh sÃ¡ch cÃ¡c bÆ°á»›c hÃ nh trÃ¬nh (hoáº·c váº­t pháº©m) vá»›i:
        value[i]: giÃ¡ trá»‹ cá»§a bÆ°á»›c thá»© i
        weight[i]: chi phÃ­ cá»§a bÆ°á»›c thá»© i
    XÃ¢y dá»±ng báº£ng dp[i][w] â€“ giÃ¡ trá»‹ tá»‘i Ä‘a Ä‘áº¡t Ä‘Æ°á»£c khi xÃ©t Ä‘áº¿n bÆ°á»›c thá»© i vá»›i tá»•ng chi phÃ­ khÃ´ng vÆ°á»£t quÃ¡ w.
    CÃ´ng thá»©c truy há»“i:
        dp[i][w] = max(dp[i-1][w], dp[i-1][w - weight[i]] + value[i])
    KhÃ´ng chá»n bÆ°á»›c i: giá»¯ nguyÃªn giÃ¡ trá»‹ dp[i-1][w]
    Chá»n bÆ°á»›c i: cá»™ng thÃªm value[i] náº¿u cÃ²n Ä‘á»§ sá»©c chá»©a

ğŸ§± 3. Khá»Ÿi táº¡o giÃ¡ trá»‹ ban Ä‘áº§u (Base Cases):
Má»¥c tiÃªu: GÃ¡n giÃ¡ trá»‹ cho cÃ¡c tráº¡ng thÃ¡i Ä‘Æ¡n giáº£n nháº¥t.
PhÃ¢n tÃ­ch:
    dp[0][w] = 0   # chÆ°a cÃ³ bÆ°á»›c nÃ o thÃ¬ giÃ¡ trá»‹ lÃ  0
    dp[i][0] = 0.0 # Vá»›i 0 nÄƒng lÆ°á»£ng, khÃ´ng Ä‘i Ä‘Æ°á»£c Ä‘Ã¢u

ğŸ” 4. Duyá»‡t theo thá»© tá»± há»£p lÃ½ (Bottom-Up hoáº·c Top-Down):
Má»¥c tiÃªu:
    Bottom-Up: Duyá»‡t tá»« nhá» Ä‘áº¿n lá»›n, thÆ°á»ng dÃ¹ng máº£ng 2 chiá»u hoáº·c 1 chiá»u.
    Top-Down (Memoization): DÃ¹ng Ä‘á»‡ quy káº¿t há»£p lÆ°u káº¿t quáº£ Ä‘á»ƒ trÃ¡nh láº·p láº¡i.
PhÃ¢n tÃ­ch:
    Bottom-Up thÆ°á»ng nhanh hÆ¡n vÃ  dá»… kiá»ƒm soÃ¡t bá»™ nhá»›.
    Top-Down dá»… viáº¿t hÆ¡n nhÆ°ng cÃ³ thá»ƒ tá»‘n stack náº¿u khÃ´ng tá»‘i Æ°u.

ğŸ” 5. Truy váº¿t lá»i giáº£i (Backtracking â€“ náº¿u cáº§n):
Má»¥c tiÃªu: TÃ¬m láº¡i Ä‘Æ°á»ng Ä‘i hoáº·c cáº¥u trÃºc lá»i giáº£i.
PhÃ¢n tÃ­ch:
    Dá»±a vÃ o báº£ng dp Ä‘Ã£ tÃ­nh Ä‘á»ƒ truy ngÆ°á»£c láº¡i.
    Sau khi tÃ­nh xong báº£ng dp, ta cÃ³ thá»ƒ truy ngÆ°á»£c láº¡i Ä‘á»ƒ biáº¿t mÃ¬nh Ä‘Ã£ chá»n nhá»¯ng bÆ°á»›c nÃ o 
    â€” tá»©c lÃ  nhá»¯ng hÃ nh trÃ¬nh nÃ o mang láº¡i giÃ¡ trá»‹ cao nháº¥t mÃ  váº«n náº±m trong giá»›i háº¡n chi phÃ­.

ğŸ’¡ áº¨n dá»¥ 
    Má»—i bÆ°á»›c hÃ nh trÃ¬nh Ä‘á»u mang theo má»™t giÃ¡ trá»‹ vÃ  má»™t trá»ng lÆ°á»£ng.
    GiÃ¡ trá»‹ lÃ  nhá»¯ng gÃ¬ ta há»c Ä‘Æ°á»£c, Ä‘áº¡t Ä‘Æ°á»£c. 
    Trá»ng lÆ°á»£ng lÃ  nhá»¯ng gÃ¬ ta pháº£i Ä‘Ã¡nh Ä‘á»•i, chá»‹u Ä‘á»±ng. 
    HÃ nh trÃ¬nh tá»‘i Æ°u khÃ´ng pháº£i lÃ  Ä‘i nhiá»u nháº¥t, mÃ  lÃ  chá»n Ä‘Ãºng bÆ°á»›c Ä‘á»ƒ Ä‘i.

 =============================================================================================

ğŸ§© 1. XÃ¡c Ä‘á»‹nh bÃ i toÃ¡n con vÃ  má»‘i quan há»‡ giá»¯a chÃºng (Subproblems):
    BÃ i toÃ¡n gá»‘c: Chá»n táº­p con cÃ¡c bÆ°á»›c hÃ nh trÃ¬nh sao cho tá»•ng nÄƒng lÆ°á»£ng tiÃªu thá»¥ khÃ´ng vÆ°á»£t quÃ¡ batteryLimit, 
    vÃ  tá»•ng quÃ£ng Ä‘Æ°á»ng Ä‘i Ä‘Æ°á»£c lÃ  lá»›n nháº¥t.

    BÃ i toÃ¡n con: Vá»›i má»™t má»©c nÄƒng lÆ°á»£ng Ä‘Ã£ dÃ¹ng (usedEnergy), ta lÆ°u tráº¡ng thÃ¡i tá»‘t nháº¥t gá»“m:
        Tá»•ng quÃ£ng Ä‘Æ°á»ng Ä‘i Ä‘Æ°á»£c
        Danh sÃ¡ch cÃ¡c bÆ°á»›c Ä‘Ã£ chá»n

    Má»‘i quan há»‡: Má»—i bÆ°á»›c hÃ nh trÃ¬nh cÃ³ thá»ƒ:
        ÄÆ°á»£c thÃªm vÃ o má»™t tráº¡ng thÃ¡i hiá»‡n cÃ³ â†’ táº¡o tráº¡ng thÃ¡i má»›i vá»›i nÄƒng lÆ°á»£ng tÄƒng vÃ  quÃ£ng Ä‘Æ°á»ng tÄƒng
        Bá»‹ bá» qua â†’ giá»¯ nguyÃªn tráº¡ng thÃ¡i cÅ©

ğŸ§  2. XÃ¢y dá»±ng cÃ´ng thá»©c truy há»“i (recurrence relation)
    KhÃ´ng dÃ¹ng máº£ng dp[i][w] nhÆ° kiá»ƒu truyá»n thá»‘ng, mÃ  dÃ¹ng unordered_map<double, State> vá»›i:

    dp[newEnergy] = max(dp[newEnergy], dp[usedEnergy] + distance_i)
    Trong Ä‘Ã³:
        newEnergy = usedEnergy + energy_i
        distance_i = computeDistance(step[i])
        State = pair<distance, path> â†’ lÆ°u cáº£ quÃ£ng Ä‘Æ°á»ng vÃ  danh sÃ¡ch bÆ°á»›c

ğŸ§± 3. Khá»Ÿi táº¡o giÃ¡ trá»‹ ban Ä‘áº§u (base cases)
    Vá»›i 0 nÄƒng lÆ°á»£ng Ä‘Ã£ dÃ¹ng â†’ quÃ£ng Ä‘Æ°á»ng = 0, chÆ°a chá»n bÆ°á»›c nÃ o:
        dp[0.0] = {0.0, {}};
    ÄÃ¢y lÃ  Ä‘iá»ƒm xuáº¥t phÃ¡t cá»§a hÃ nh trÃ¬nh: chÆ°a Ä‘i Ä‘Ã¢u, chÆ°a tiÃªu tá»‘n gÃ¬.

ğŸ” 4. TÃ­nh toÃ¡n theo thá»© tá»± tÄƒng dáº§n (bottom-up)
    Duyá»‡t tá»«ng bÆ°á»›c hÃ nh trÃ¬nh:
        Vá»›i má»—i tráº¡ng thÃ¡i hiá»‡n táº¡i (usedEnergy), ta thá»­ thÃªm bÆ°á»›c i
        Náº¿u nÄƒng lÆ°á»£ng má»›i khÃ´ng vÆ°á»£t quÃ¡ giá»›i háº¡n â†’ cáº­p nháº­t tráº¡ng thÃ¡i má»›i
        DÃ¹ng nextDP Ä‘á»ƒ trÃ¡nh ghi Ä‘Ã¨ trong quÃ¡ trÃ¬nh duyá»‡t

    for (size_t i = 0; i < steps.size(); ++i) {
        ...
        for (const auto& [usedEnergy, state] : dp) {
            double newEnergy = usedEnergy + energy;
            if (newEnergy <= batteryLimit) {
                ...
                nextDP[newEnergy] = {newDistance, newPath};
            }
        }
        dp = std::move(nextDP);
    }
    
ğŸ” 5. Truy váº¿t lá»i giáº£i (Backtracking):
    Truy váº¿t Ä‘Æ°á»£c thá»±c hiá»‡n trá»±c tiáº¿p trong quÃ¡ trÃ¬nh xÃ¢y dá»±ng tráº¡ng thÃ¡i:

    std::vector<int> newPath = state.second;
    newPath.push_back(i);
    nextDP[newEnergy] = {newDistance, newPath};

    Má»—i tráº¡ng thÃ¡i lÆ°u luÃ´n danh sÃ¡ch cÃ¡c bÆ°á»›c Ä‘Ã£ chá»n
    Cuá»‘i cÃ¹ng, ta duyá»‡t qua táº¥t cáº£ tráº¡ng thÃ¡i Ä‘á»ƒ tÃ¬m quÃ£ng Ä‘Æ°á»ng lá»›n nháº¥t:

    State best = {0.0, {}};
    for (const auto& [energy, state] : dp) {
        if (state.first > best.first)
            best = state;
    }
    â†’ Tráº£ vá» best: gá»“m quÃ£ng Ä‘Æ°á»ng tá»‘i Æ°u vÃ  danh sÃ¡ch cÃ¡c bÆ°á»›c hÃ nh trÃ¬nh tÆ°Æ¡ng á»©ng.

âœ… Tá»•ng káº¿t
    BÆ°á»›c	            Ná»™i dung
1ï¸âƒ£ BÃ i toÃ¡n con	Tráº¡ng thÃ¡i táº¡i má»—i má»©c nÄƒng lÆ°á»£ng Ä‘Ã£ dÃ¹ng
2ï¸âƒ£ Truy há»“i	    Tá»« tráº¡ng thÃ¡i cÅ© â†’ thÃªm bÆ°á»›c má»›i náº¿u cÃ³ lá»£i
3ï¸âƒ£ Khá»Ÿi táº¡o	    dp[0.0] = {0.0, {}}
4ï¸âƒ£ TÃ­nh toÃ¡n	    Bottom-up, duyá»‡t tá»«ng bÆ°á»›c vÃ  tá»«ng tráº¡ng thÃ¡i
5ï¸âƒ£ Truy váº¿t	    LÆ°u Ä‘Æ°á»ng Ä‘i trong má»—i tráº¡ng thÃ¡i, chá»n tá»‘t nháº¥t cuá»‘i cÃ¹ng